<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor and Check List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
        }

        .controls .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .controls .filter-group label {
            font-weight: bold;
        }

        .controls .filter-group select,
        .controls .filter-group input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 200px;
        }

        .controls .action-buttons {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }
        
        #addNewVendorBtn {
            background-color: #6c757d;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .controls button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        #addBtn {
            background-color: #28a745;
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table th, table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        table th {
            background-color: #f2f2f2;
            font-weight: bold;
            color: #555;
        }

        table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        table tr:hover {
            background-color: #e9e9e9;
        }

        .action-cell {
            white-space: nowrap;
        }

        .action-cell button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0 5px;
            font-size: 1em;
            color: #007bff;
        }

        .action-cell button.delete {
            color: #dc3545;
        }

        /* Modal (Popup) Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            padding-top: 60px;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 8px;
            position: relative;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-content form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .modal-content form input,
        .modal-content form select {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .modal-content form button {
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .controls .filter-group select,
            .controls .filter-group input {
                width: 100%;
            }

            .controls .action-buttons {
                justify-content: space-around;
            }

            table, thead, tbody, th, td, tr {
                display: block;
            }

            thead tr {
                display: none;
            }

            tr {
                margin-bottom: 15px;
                border: 1px solid #ddd;
                border-radius: 8px;
            }

            td {
                border: none;
                position: relative;
                padding-left: 50%;
                text-align: right;
            }

            td:before {
                content: attr(data-label);
                position: absolute;
                left: 10px;
                width: calc(50% - 20px);
                text-align: left;
                font-weight: bold;
                color: #555;
            }

            .modal-content {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Vendor and Check Management</h2>
        <div class="controls">
            <div class="filter-group">
                <label for="exampleOfFilter">Example Of:</label>
                <select id="exampleOfFilter">
                    <option value="">All</option>
                    <option value="SOR">SOR</option>
                    <option value="OIG">OIG</option>
                    <option value="Global Sanctions">Global Sanctions</option>
                    <option value="Terror Watchlist">Terror Watchlist</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="vendorFilter">Vendor:</label>
                <select id="vendorFilter">
                    <option value="">All</option>
                    <option value="RapidCourt">RapidCourt</option>
                    <option value="SJV">SJV</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="sourceNameFilter">Source Name:</label>
                <input type="text" id="sourceNameFilter" placeholder="Search Source Name...">
            </div>
            <div class="action-buttons">
                <button id="addBtn">Add New</button>
                <button id="addNewVendorBtn">Add New Vendor</button>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Example Of</th>
                    <th>Source Name</th>
                    <th>Vendor</th>
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody id="dataTable">
                </tbody>
        </table>
    </div>

    <div id="newVendorModal" class="modal">
        <div class="modal-content">
            <span class="close-button new-vendor-close">&times;</span>
            <h3>Add New Vendor Name</h3>
            <form id="newVendorForm">
                <label for="newVendorName">New Vendor Name:</label>
                <input type="text" id="newVendorName" name="newVendorName" required>
                <button type="submit">Add Vendor</button>
            </form>
        </div>
    </div>

    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close-button add-close">&times;</span>
            <h3>Add New Entry</h3>
            <form id="addForm">
                <label for="addExampleOf">Example Of:</label>
                <select id="addExampleOf" name="exampleOf" required>
                    <option value="SOR">SOR</option>
                    <option value="OIG">OIG</option>
                    <option value="Global Sanctions">Global Sanctions</option>
                    <option value="Terror Watchlist">Terror Watchlist</option>
                </select>
                <label for="addSourceName">Source Name:</label>
                <input type="text" id="addSourceName" name="sourceName" required>
                <label for="addVendor">Vendor:</label>
                <select id="addVendor" name="vendor" required>
                    <option value="RapidCourt">RapidCourt</option>
                    <option value="SJV">SJV</option>
                </select>
                <button type="submit">Add Entry</button>
            </form>
        </div>
    </div>

    <div id="updateModal" class="modal">
        <div class="modal-content">
            <span class="close-button update-close">&times;</span>
            <h3>Update Entry</h3>
            <form id="updateForm">
                <input type="hidden" id="rowIndex">
                <label for="modalExampleOf">Example Of:</label>
                <select id="modalExampleOf" name="exampleOf" required>
                    <option value="SOR">SOR</option>
                    <option value="OIG">OIG</option>
                    <option value="Global Sanctions">Global Sanctions</option>
                    <option value="Terror Watchlist">Terror Watchlist</option>
                </select>
                <label for="modalSourceName">Source Name:</label>
                <input type="text" id="modalSourceName" name="sourceName" required>
                <label for="modalVendor">Vendor:</label>
                <select id="modalVendor" name="vendor" required>
                    <option value="RapidCourt">RapidCourt</option>
                    <option value="SJV">SJV</option>
                </select>
                <button type="submit">Save Updates</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const exampleOfFilter = document.getElementById('exampleOfFilter');
            const vendorFilter = document.getElementById('vendorFilter');
            const sourceNameFilter = document.getElementById('sourceNameFilter');
            const dataTable = document.getElementById('dataTable');

            // Data array to manage entries
            let data = [
                { example: 'SOR', source: 'Dru Sjodin National Sex Offender Public Website (NSOPW)', vendor: 'RapidCourt' },
                { example: 'SOR', source: 'California Megan\'s Law (CA DOJ)', vendor: 'SJV' },
                { example: 'SOR', source: 'Florida FDLE Sexual Offenders & Predators Search', vendor: 'RapidCourt' },
                { example: 'SOR', source: 'Texas DPS Public Sex Offender Registry', vendor: 'SJV' },
                { example: 'SOR', source: 'New York DCJS Sex Offender Registry', vendor: 'RapidCourt' },
                { example: 'SOR', source: 'Illinois State Police Sex Offender Registry', vendor: 'SJV' },
                { example: 'SOR', source: 'Pennsylvania Megan\'s Law Registry', vendor: 'RapidCourt' },
                { example: 'OIG', source: 'HHS OIG List of Excluded Individuals/Entities (LEIE)', vendor: 'SJV' },
                { example: 'OIG', source: 'SAM.gov Exclusions / Debarment', vendor: 'RapidCourt' },
                { example: 'OIG', source: 'State Medicaid Exclusion Lists', vendor: 'SJV' },
                { example: 'OIG', source: 'HUD Debarment / Departmental Enforcement Center (DEC)', vendor: 'RapidCourt' },
                { example: 'OIG', source: 'VA OIG Exclusion References', vendor: 'SJV' },
                { example: 'OIG', source: 'Vendor Guides / OIG vs SAM vs State Exclusions', vendor: 'RapidCourt' },
                { example: 'OIG', source: 'GSA Excluded Parties List System (EPLS)', vendor: 'SJV' },
                { example: 'Global Sanctions', source: 'OFAC Specially Designated Nationals (SDN) List', vendor: 'RapidCourt' },
                { example: 'Global Sanctions', source: 'UN Consolidated Sanctions List', vendor: 'SJV' },
                { example: 'Global Sanctions', source: 'European Union Consolidated Financial Sanctions List', vendor: 'RapidCourt' },
                { example: 'Global Sanctions', source: 'UK Consolidated Sanctions List', vendor: 'SJV' },
                { example: 'Global Sanctions', source: 'World Bank Debarred Firms List', vendor: 'RapidCourt' },
                { example: 'Global Sanctions', source: 'Interpol Red Notices', vendor: 'SJV' },
                { example: 'Terror Watchlist', source: 'FBI Terrorist Screening Center (TSC) / TSDB overview', vendor: 'RapidCourt' },
                { example: 'Terror Watchlist', source: 'FBI Terrorist Watchlisting Transparency document', vendor: 'SJV' },
                { example: 'Terror Watchlist', source: 'Department of State Foreign Terrorist Organizations (FTO)', vendor: 'RapidCourt' },
                { example: 'Terror Watchlist', source: 'DHS No Fly List', vendor: 'SJV' },
                { example: 'Terror Watchlist', source: 'EU Terrorist List', vendor: 'RapidCourt' }
            ];

            // New Vendor Modal elements
            const newVendorModal = document.getElementById('newVendorModal');
            const newVendorForm = document.getElementById('newVendorForm');
            const newVendorBtn = document.getElementById('addNewVendorBtn');
            const newVendorCloseBtn = document.querySelector('.new-vendor-close');
            
            // Add Entry Modal elements
            const addModal = document.getElementById('addModal');
            const addForm = document.getElementById('addForm');
            const addBtn = document.getElementById('addBtn');
            const addCloseBtn = document.querySelector('.add-close');
            const addVendorSelect = document.getElementById('addVendor');

            // Update Entry Modal elements
            const updateModal = document.getElementById('updateModal');
            const updateForm = document.getElementById('updateForm');
            const updateCloseBtn = document.querySelector('.update-close');
            const modalVendorSelect = document.getElementById('modalVendor');
            const rowIndexInput = document.getElementById('rowIndex');

            const renderTable = () => {
                dataTable.innerHTML = '';
                data.forEach((entry, index) => {
                    const row = document.createElement('tr');
                    row.setAttribute('data-index', index);
                    row.setAttribute('data-example', entry.example);
                    row.setAttribute('data-vendor', entry.vendor);
                    row.innerHTML = `
                        <td data-label="Example Of">${entry.example}</td>
                        <td data-label="Source Name">${entry.source}</td>
                        <td data-label="Vendor">${entry.vendor}</td>
                        <td data-label="Update" class="action-cell"><button class="update">✏️</button></td>
                        <td data-label="Delete" class="action-cell"><button class="delete">🗑️</button></td>
                    `;
                    dataTable.appendChild(row);
                });
                applyFilters();
            };

            const updateVendorDropdowns = (newVendor) => {
                const option1 = document.createElement('option');
                option1.value = newVendor;
                option1.textContent = newVendor;
                vendorFilter.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = newVendor;
                option2.textContent = newVendor;
                addVendorSelect.appendChild(option2);

                const option3 = document.createElement('option');
                option3.value = newVendor;
                option3.textContent = newVendor;
                modalVendorSelect.appendChild(option3);
            };

            const applyFilters = () => {
                const rows = dataTable.getElementsByTagName('tr');
                const exampleFilterValue = exampleOfFilter.value.toLowerCase();
                const vendorFilterValue = vendorFilter.value.toLowerCase();
                const sourceNameFilterValue = sourceNameFilter.value.toLowerCase();

                for (let i = 0; i < rows.length; i++) {
                    const row = rows[i];
                    const exampleOf = row.getAttribute('data-example').toLowerCase();
                    const vendor = row.getAttribute('data-vendor').toLowerCase();
                    const sourceName = row.cells[1].textContent.toLowerCase();

                    const matchesExample = exampleFilterValue === '' || exampleOf === exampleFilterValue;
                    const matchesVendor = vendorFilterValue === '' || vendor === vendorFilterValue;
                    const matchesSourceName = sourceName.includes(sourceNameFilterValue);

                    if (matchesExample && matchesVendor && matchesSourceName) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                }
            };

            exampleOfFilter.addEventListener('change', applyFilters);
            vendorFilter.addEventListener('change', applyFilters);
            sourceNameFilter.addEventListener('keyup', applyFilters);

            // Open Add New Vendor Modal
            newVendorBtn.addEventListener('click', () => {
                newVendorForm.reset();
                newVendorModal.style.display = "block";
            });

            // Handle Add New Vendor Form Submission
            newVendorForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newVendorName = document.getElementById('newVendorName').value;
                if (newVendorName && !Array.from(vendorFilter.options).some(opt => opt.value === newVendorName)) {
                    updateVendorDropdowns(newVendorName);
                }
                newVendorModal.style.display = "none";
            });

            // Open Add New Entry Modal
            addBtn.addEventListener('click', () => {
                addForm.reset();
                addModal.style.display = "block";
            });

            // Handle Add New Entry Form Submission
            addForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newEntry = {
                    example: document.getElementById('addExampleOf').value,
                    source: document.getElementById('addSourceName').value,
                    vendor: document.getElementById('addVendor').value
                };
                data.push(newEntry);
                renderTable();
                addModal.style.display = "none";
            });

            // Open Update Entry Modal and pre-fill fields
            dataTable.addEventListener('click', (e) => {
                if (e.target.classList.contains('update')) {
                    const row = e.target.closest('tr');
                    const rowIndex = row.getAttribute('data-index');
                    const entry = data[rowIndex];
                    
                    rowIndexInput.value = rowIndex;
                    document.getElementById('modalExampleOf').value = entry.example;
                    document.getElementById('modalSourceName').value = entry.source;
                    document.getElementById('modalVendor').value = entry.vendor;
                    
                    updateModal.style.display = "block";
                }
                if (e.target.classList.contains('delete')) {
                    if (confirm('Are you sure you want to delete this row?')) {
                        const row = e.target.closest('tr');
                        const rowIndex = row.getAttribute('data-index');
                        data.splice(rowIndex, 1);
                        renderTable();
                    }
                }
            });

            // Handle Update Entry Form Submission
            updateForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const rowIndex = rowIndexInput.value;
                data[rowIndex] = {
                    example: document.getElementById('modalExampleOf').value,
                    source: document.getElementById('modalSourceName').value,
                    vendor: document.getElementById('modalVendor').value
                };
                renderTable();
                updateModal.style.display = "none";
            });

            // Close modals by clicking outside or on the close button
            document.querySelectorAll('.close-button').forEach(button => {
                button.addEventListener('click', () => {
                    button.closest('.modal').style.display = 'none';
                });
            });

            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = "none";
                }
            });

            renderTable();
        });
    </script>
</body>
</html>
